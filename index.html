<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>PLNT ¬∑ Tunes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Daily music rituals for Illumina cycles. Switch Neon/Honey modes, play playlists, and run anchor tests.">
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ctext y='50' x='6' font-size='48'%3Eüåï%3C/text%3E%3C/svg%3E">
<meta name="color-scheme" content="dark light">
<meta property="og:title" content="PLNT ¬∑ Tunes">
<meta property="og:description" content="Neon/Honey modes, playlists, and Illumina anchor tests.">
<meta property="og:type" content="website">
<meta property="og:image" content="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='630'%3E%3Crect width='100%25' height='100%25' fill='%230a0b0c'/%3E%3Ctext x='50%25' y='55%25' dominant-baseline='middle' text-anchor='middle' font-family='system-ui' font-size='84' fill='%23c3e8ff'%3EPLNT ¬∑ Tunes%3C/text%3E%3C/svg%3E">
<style>
  /* ===== Pepper-Black base ===== */
  :root{
    --pepper:#0a0b0c; --char:#101214; --ink:#f1f2f3; --muted:#8e98a3;
    --line: color-mix(in oklab, var(--ink) 12%, transparent);
    --ring: color-mix(in oklab, var(--ink) 18%, transparent);
    --accent:#c3e8ff; --ok:#7ee787; --warn:#f5d97b; --no:#ff7b72;
    --pad:16px; --rad:16px; --rad-sm:10px; --fw:600;
    --glow: 0 0 24px color-mix(in oklab, var(--accent) 60%, transparent);
  }
  @media (prefers-color-scheme: light){
    :root{
      --pepper:#fafafa; --char:#ffffff; --ink:#0b0d10; --muted:#596272;
      --line: color-mix(in oklab, var(--ink) 16%, transparent);
      --ring: color-mix(in oklab, var(--ink) 22%, transparent);
      --accent:#144d7a; --glow: 0 0 0 transparent;
    }
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:var(--pepper); color:var(--ink);
    font:500 15px/1.45 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, Helvetica, Arial;
  }

  /* ===== Site chrome ===== */
  .sitebar{
    position:sticky; top:0; z-index:10;
    background:linear-gradient(180deg, color-mix(in oklab,var(--char) 92%, transparent), var(--char));
    border-bottom:1px solid var(--line); padding:10px 16px;
  }
  .nav{max-width:1120px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:12px}
  .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px}
  .dot{inline-size:9px; block-size:9px; border-radius:50%; background:var(--accent); box-shadow:var(--glow)}
  .links{display:flex; gap:10px; flex-wrap:wrap}
  .link{
    display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
    border:1px solid var(--ring); background:var(--char); color:var(--ink); text-decoration:none; font-weight:600
  }
  .link[aria-current="page"]{outline:2px solid var(--accent); outline-offset:2px}

  .hero{
    max-width:1120px; margin:18px auto; padding:0 16px;
    display:grid; gap:10px; align-items:center; grid-template-columns:1fr auto;
  }
  h1{margin:0; font-size:28px; letter-spacing:.2px}
  .modes{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  button, select{
    border:1px solid var(--ring); background:var(--char); color:var(--ink);
    border-radius:var(--rad-sm); padding:10px 12px; font-weight:var(--fw);
  }
  .mode[data-on="1"]{outline:2px solid var(--accent)}
  .container{max-width:1120px; margin:0 auto 36px; padding:0 16px; display:grid; gap:16px}
  .card{background:var(--char); border:1px solid var(--line); border-radius:var(--rad); padding:var(--pad)}
  .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}

  /* ===== Neon / Honey aesthetic toggles ===== */
  [data-mode="neon"] .brand .dot{background:#6cf; box-shadow:0 0 24px #6cf}
  [data-mode="neon"] .accent{color:#9ddcff; text-shadow:0 0 10px #9ddcff}
  [data-mode="honey"] .brand .dot{background:#ffcd66; box-shadow:0 0 24px #ffcd66}
  [data-mode="honey"] .accent{color:#ffd58a; text-shadow:0 0 8px #663}
  .hint{color:var(--muted); font-size:12px}

  /* ===== Playlist / embeds ===== */
  .grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(260px,1fr)); gap:12px}
  .tile{
    background:var(--char); border:1px solid var(--line); border-radius:12px; padding:12px;
    display:grid; gap:8px
  }
  .tile h3{margin:0; font-size:16px}
  .pill{display:inline-flex; gap:6px; align-items:center; padding:6px 10px; border-radius:999px; background:var(--char); border:1px solid var(--line)}
  iframe{width:100%; aspect-ratio:16/9; border:0; border-radius:12px}
  .stage{width:100%; aspect-ratio:16/10; min-height:300px; border-radius:12px; border:1px dashed var(--line); display:grid; place-items:center; color:var(--muted)}

  /* ===== Footer ===== */
  footer{border-top:1px solid var(--line); padding:14px 16px; color:var(--muted)}
  .foot{max-width:1120px; margin:0 auto; display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap}
</style>
</head>
<body data-mode="neon">
  <!-- ===== Header ===== -->
  <div class="sitebar">
    <nav class="nav" aria-label="Primary">
      <div class="brand"><span class="dot"></span><span>PLNT ¬∑ Tunes</span></div>
      <div class="links">
        <a class="link" aria-current="page" href="/">Home</a>
        <a class="link" href="/pairs/">Pairs</a>
      </div>
    </nav>
  </div>

  <!-- ===== Hero / Controls ===== -->
  <section class="hero">
    <h1><span class="accent">Daily Tunes</span> ¬∑ Illumina Rituals</h1>
    <div class="modes">
      <button id="neon" class="mode" data-on="1" aria-pressed="true">Neon</button>
      <button id="honey" class="mode" aria-pressed="false">Honey</button>
      <select id="playerPref" title="Player">
        <option value="links">Links only</option>
        <option value="youtube">YouTube embeds</option>
        <option value="apple">Apple embeds</option>
      </select>
    </div>
  </section>

  <main class="container">
    <!-- ===== Playlists ===== -->
    <section class="card">
      <div class="row" style="justify-content:space-between">
        <h2 style="margin:0">Playlists</h2>
        <span class="hint">Tip: set your default player above. Mode + player are saved on this device.</span>
      </div>

      <div id="playlists" class="grid" aria-live="polite"></div>
    </section>

    <!-- ===== Illumina 1 ¬∑ auto-wired from your files ===== -->
    <section class="card" id="illumina1-block">
      <div class="row" style="justify-content:space-between;align-items:center">
        <h2 style="margin:0">Illumina 1 ¬∑ Launch Cycle</h2>
        <div class="row">
          <a class="pill" href="https://www.youtube.com/playlist?list=PL2H7n7qLAdf5NQd7hZyh_mWnYPKErpVk3" target="_blank" rel="noopener">Open YouTube Playlist</a>
          <a class="pill" href="https://music.apple.com/playlist/illumina-1/pl.u-NpXmzemC4Y1N49y" target="_blank" rel="noopener">Open Apple Playlist</a>
          <button id="toggleIllumina1Embeds">Toggle Embeds</button>
        </div>
      </div>
      <p class="hint" style="margin:8px 0 12px">
        Full track list with direct YouTube + Apple links. ‚ÄúToggle Embeds‚Äù shows inline players (heavier).
      </p>
      <div id="illumina1-list" class="grid"></div>
    </section>

    <!-- ===== Mapping Videos (placeholders you can edit) ===== -->
    <section class="card">
      <div class="row" style="justify-content:space-between">
        <h2 style="margin:0">Mapping Videos</h2>
        <span class="hint">Short clips that introduce each archetype or weekly theme.</span>
      </div>
      <div id="videos" class="grid"></div>
    </section>

    <!-- ===== Anchor Tester CTA ===== -->
    <section class="card">
      <div class="row" style="justify-content:space-between">
        <h2 style="margin:0">Anchor Tests</h2>
        <a class="link" href="/pairs/">Open Pairs & Tester</a>
      </div>
      <p class="hint">Try <strong>Eminem ‚Äî ‚ÄúLose Yourself‚Äù ‚Üí Taylor Swift ‚Äî ‚ÄúShake It Off‚Äù</strong> and log your results in /pairs.</p>
    </section>

    <!-- ===== Visual Stage (optional hero art) ===== -->
    <section class="card">
      <div class="stage" id="stage">Mode preview (Neon / Honey)</div>
    </section>
  </main>

  <footer>
    <div class="foot">
      <div>PLNT ¬∑ Tunes ‚Äî Neon/Honey modes ‚Ä¢ pepper-black theme</div>
      <div class="hint">Illumina-1 data sourced from your uploaded files for Apple & YouTube IDs.</div>
    </div>
  </footer>

<script>
/* =========================
   Playlists (top tiles)
   ========================= */
/* Illumina 1 playlist links come from your uploads:
   - Apple Music playlist id: pl.u-NpXmzemC4Y1N49y:contentReference[oaicite:2]{index=2}
   - YouTube playlist id: PL2H7n7qLAdf5NQd7hZyh_mWnYPKErpVk3:contentReference[oaicite:3]{index=3} */
var playlists = [
  {
    title: "Illumina 1 ¬∑ Launch Cycle",
    desc: "Mantra + Honey ignition",
    youtube: "https://www.youtube.com/playlist?list=PL2H7n7qLAdf5NQd7hZyh_mWnYPKErpVk3",
    apple: "https://music.apple.com/playlist/illumina-1/pl.u-NpXmzemC4Y1N49y",
    cover: "üåï"
  },
  {
    title: "Taste / Sabrina Lens",
    desc: "Sweet magnet archetype",
    youtube: "https://www.youtube.com/playlist?list=PLXXXXXXXX_sabrina",
    apple: "https://music.apple.com/us/playlist/example-sabrina/pl.u-XXXX",
    cover: "üçØ"
  },
  {
    title: "Cosmic Teacher / Janet",
    desc: "Curiosity & STEAM",
    youtube: "https://www.youtube.com/playlist?list=PLXXXXXXXX_janet",
    apple: "https://music.apple.com/us/playlist/example-janet/pl.u-XXXX",
    cover: "üåô"
  }
];

/* =========================
   Illumina 1 full track list (from uploads)
   Apple serviceId values and YouTube IDs are from:
   - JSON (Apple):contentReference[oaicite:4]{index=4}, TXT (YouTube):contentReference[oaicite:5]{index=5}
   ========================= */
const ILLUMINA1 = [
  {t:"White America",a:"Eminem",           yt:"RZIzD0ZfTFg", am:"1440903544"},
  {t:"HOT TO GO!", a:"Chappell Roan",      yt:"xaPNR-_Cfn0", am:"1698723221"},
  {t:"Honey", a:"Robyn",                   yt:"Mru9GG3ur9U", am:"1436781347"},
  {t:"Strawberry Swing", a:"Coldplay",     yt:"h3pJZSTQqIg", am:"1122773712"},
  {t:"Honey", a:"Mariah Carey",            yt:"w3KOowB4k_k", am:"192812332"},
  {t:"HUMBLE.", a:"Kendrick Lamar",        yt:"tvTRZJ-4EyI", am:"1440881684"},
  {t:"Sweet Disposition", a:"The Temper Trap", yt:"jxKjOOR9sPU", am:"1771693670"},
  {t:"Taste (feat. Offset)", a:"Tyga",     yt:"LjxulQ1bEWg", am:"1384304787"},
  {t:"Froot", a:"Marina and The Diamonds", yt:"WZzcY7ASQno", am:"936941149"},
  {t:"Do It", a:"Chloe x Halle",           yt:"a9HIaGcBocc", am:"1512284179"},
  {t:"Good as Hell", a:"Lizzo",            yt:"SmbmeOgWsqE", am:"1150159755"},
  {t:"Truth Hurts", a:"Lizzo",             yt:"P00HMxdsVZI", am:"1494981961"},
  {t:"Take a Bow", a:"Madonna",            yt:"XDeiovnCv1o", am:"80814995"},
  {t:"Bitter Sweet Symphony", a:"The Verve", yt:"1lyu1KKwC74", am:"1443258189"},
  {t:"Work It", a:"Missy Elliott",         yt:"cjIvu7e6Wq8", am:"254167909"},
  {t:"Juice", a:"Lizzo",                   yt:"XaCrQL_8eMY", am:"1452319283"},
  {t:"Controversy (Single Version)", a:"Prince", yt:"4gazNwzC4H0", am:"1545712802"},
  {t:"Cinnamon Girl", a:"Lana Del Rey",    yt:"DCYmJDO2_IE", am:"1474669074"},
  {t:"Dog Days Are Over", a:"Florence + the Machine", yt:"iWOyfLBYtuU", am:"1440729744"},
  {t:"Don't Start Now", a:"Dua Lipa",      yt:"oygrmJFKYZY", am:"1484636829"},
  {t:"Sunflower", a:"Post Malone & Swae Lee", yt:"ApXoWvfEYVU", am:"1445949267"},
  {t:"Formation", a:"Beyonc√©",             yt:"WDZJPJV__bQ", am:"1460430757"},
  {t:"Illuminated", a:"Hurts",             yt:"6CvuyaKmLnw", am:"387681168"},
  {t:"HONEY (ARE U COMING?)", a:"M√•neskin", yt:"HZnNt9nnEhw", am:"1701785550"},
  {t:"Express Yourself", a:"Madonna",      yt:"GsVcUzP_O_8", am:"329043302"},
  {t:"Savage Remix (feat. Beyonc√©)", a:"Megan Thee Stallion", yt:"lEIqjoO0-Bs", am:"1510814146"},
  {t:"Paper Planes", a:"M.I.A.",           yt:"ewRjZoRtu0Y", am:"296393515"},
  {t:"Viva La Vida", a:"Coldplay",         yt:"dvgZkm1xWPE", am:"1122773680"},
  {t:"Lose Yourself", a:"Eminem",          yt:"xFYQQPAOz7Y", am:"1444221569"},
  {t:"Shake It Off", a:"Taylor Swift",     yt:"nfWlot6h_JM", am:"1440936016"},
  {t:"Levitating", a:"Dua Lipa",           yt:"TUVcZfQe-Kw", am:"1538003843"},
  {t:"ENERGY (feat. BEAM)", a:"Beyonc√©",   yt:"O9rk6ldyFkA", am:"1630005852"},
  {t:"Dreams", a:"Fleetwood Mac",          yt:"5oWyMakvQew", am:"202272624"},
  {t:"Edge of Seventeen", a:"Stevie Nicks", yt:"UmPgMc3R8zg", am:"219393906"},
  {t:"Born This Way", a:"Lady Gaga",       yt:"wV1FrqwZyKw", am:"1440857424"},
  {t:"Fix You", a:"Coldplay",              yt:"k4V3Mo61fJM", am:"1123076826"},
  {t:"Alright", a:"Kendrick Lamar",        yt:"Z-48u_uWMHY", am:"1440829463"},
  {t:"thank u, next", a:"Ariana Grande",   yt:"gl1aHhXnN1k", am:"1450330686"},
  {t:"Back to Black", a:"Amy Winehouse",   yt:"TJAfLE39ZZ8", am:"1422677785"},
  {t:"XO", a:"Beyonc√©",                    yt:"3xUfCUFPL-8", am:"780519977"},
  {t:"Nights", a:"Frank Ocean",            yt:"r4l9bFqgMaQ", am:"1146195720"},
  {t:"Closing Time", a:"Semisonic",        yt:"xGytDsqkQY8", am:"1443912092"}
];

/* Mapping videos ‚Äî fill in YouTube watch links; empty strings render as editable placeholders */
var mappingVideos = [
  { title:"Eminem ¬∑ Victory Song", url:"https://www.youtube.com/watch?v=_Yhyp-_hX2s" },
  { title:"Taylor ¬∑ Release Loop", url:"https://www.youtube.com/watch?v=nfWlot6h_JM" },
  { title:"Sabrina ¬∑ Taste Spark", url:"" },
  { title:"Janet ¬∑ Cosmic Teacher", url:"" },
  { title:"Emma ¬∑ Identity Flare", url:"" },
  { title:"Doechii ¬∑ Trickster", url:"" },
  { title:"Hot To Go! ¬∑ Swarm", url:"" }
];

/* =========================
   Preferences
   ========================= */
var body = document.body;
var neonBtn = document.getElementById("neon");
var honeyBtn = document.getElementById("honey");
var playerPref = document.getElementById("playerPref");

(function initPrefs(){
  var mode = localStorage.getItem("plnt_tunes_mode") || "neon";
  applyMode(mode);
  playerPref.value = localStorage.getItem("plnt_tunes_player") || "links";

  neonBtn.addEventListener("click", function(){ applyMode("neon"); saveMode("neon"); });
  honeyBtn.addEventListener("click", function(){ applyMode("honey"); saveMode("honey"); });
  playerPref.addEventListener("change", function(){ localStorage.setItem("plnt_tunes_player", this.value); renderPlaylists(); });

  function saveMode(m){ localStorage.setItem("plnt_tunes_mode", m); }
  function applyMode(m){
    body.setAttribute("data-mode", m);
    neonBtn.dataset.on = m==="neon" ? "1" : "";
    neonBtn.setAttribute("aria-pressed", m==="neon");
    honeyBtn.dataset.on = m==="honey" ? "1" : "";
    honeyBtn.setAttribute("aria-pressed", m==="honey");
    document.getElementById("stage").textContent = m==="neon" ? "Neon mode active" : "Honey mode active";
  }
})();

/* =========================
   Playlists renderer
   ========================= */
function renderPlaylists(){
  var wrap = document.getElementById("playlists");
  var pref = playerPref.value;
  var frag = document.createDocumentFragment();

  playlists.forEach(function(p){
    var card = document.createElement("article");
    card.className = "tile";

    var h = document.createElement("h3");
    h.textContent = (p.cover ? p.cover + " " : "") + p.title;
    card.appendChild(h);

    var d = document.createElement("p");
    d.className = "hint";
    d.textContent = p.desc || "";
    card.appendChild(d);

    var row = document.createElement("div");
    row.className = "row";

    if(p.youtube){
      var yt = document.createElement("a");
      yt.className = "pill"; yt.href = p.youtube; yt.textContent = "YouTube";
      yt.target = "_blank"; yt.rel = "noopener";
      row.appendChild(yt);
    }

    if(p.apple){
      var am = document.createElement("a");
      am.className = "pill"; am.href = p.apple; am.textContent = "Apple Music";
      am.target = "_blank"; am.rel = "noopener";
      row.appendChild(am);
    }

    card.appendChild(row);

    if(pref === "youtube" && p.youtube){
      var id = extractYTListId(p.youtube);
      if(id){
        var iframe = document.createElement("iframe");
        iframe.loading = "lazy";
        iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
        iframe.referrerPolicy = "strict-origin-when-cross-origin";
        iframe.src = "https://www.youtube-nocookie.com/embed/videoseries?list=" + id;
        card.appendChild(iframe);
      }
    }
    if(pref === "apple" && p.apple){
      /* Apple playlist embeds require a full Apple Music embed URL; link above covers it. */
    }

    frag.appendChild(card);
  });

  wrap.innerHTML = "";
  wrap.appendChild(frag);
}

function extractYTListId(url){
  try{
    var u = new URL(url);
    return u.searchParams.get("list") || "";
  }catch(e){ return ""; }
}

/* =========================
   Illumina 1 renderer
   ========================= */
(function renderIllumina1(){
  const wrap = document.getElementById("illumina1-list");
  const frag = document.createDocumentFragment();
  const embedsOn = localStorage.getItem("ill1_embeds") === "1";

  ILLUMINA1.forEach((s, idx) => {
    const card = document.createElement("article");
    card.className = "tile";

    const h = document.createElement("h3");
    h.textContent = (idx+1)+". "+s.t+" ‚Äî "+s.a;
    card.appendChild(h);

    const row = document.createElement("div");
    row.className = "row";

    const y = document.createElement("a");
    y.className = "pill";
    y.href = "https://www.youtube.com/watch?v=" + s.yt;
    y.target = "_blank"; y.rel = "noopener";
    y.textContent = "YouTube";
    row.appendChild(y);

    const am = document.createElement("a");
    am.className = "pill";
    am.href = "https://music.apple.com/us/album/" + s.am;
    am.target = "_blank"; am.rel = "noopener";
    am.textContent = "Apple Music";
    row.appendChild(am);

    card.appendChild(row);

    if (embedsOn) {
      const iframe = document.createElement("iframe");
      iframe.loading = "lazy";
      iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
      iframe.referrerPolicy = "strict-origin-when-cross-origin";
      iframe.src = "https://www.youtube-nocookie.com/embed/" + s.yt;
      card.appendChild(iframe);
    }

    frag.appendChild(card);
  });

  wrap.innerHTML = "";
  wrap.appendChild(frag);
})();

document.getElementById("toggleIllumina1Embeds").addEventListener("click", function(){
  const key = "ill1_embeds";
  const next = localStorage.getItem(key) === "1" ? "0" : "1";
  localStorage.setItem(key, next);

  const wrap = document.getElementById("illumina1-list");
  wrap.innerHTML = "";
  const embedsOn = next === "1";
  const frag = document.createDocumentFragment();

  ILLUMINA1.forEach((s, idx) => {
    const card=document.createElement("article"); card.className="tile";
    const h=document.createElement("h3"); h.textContent=(idx+1)+". "+s.t+" ‚Äî "+s.a; card.appendChild(h);
    const row=document.createElement("div"); row.className="row";
    const y=document.createElement("a"); y.className="pill"; y.href="https://www.youtube.com/watch?v="+s.yt; y.target="_blank"; y.rel="noopener"; y.textContent="YouTube"; row.appendChild(y);
    const am=document.createElement("a"); am.className="pill"; am.href="https://music.apple.com/us/album/"+s.am; am.target="_blank"; am.rel="noopener"; am.textContent="Apple Music"; row.appendChild(am);
    card.appendChild(row);
    if(embedsOn){ const iframe=document.createElement("iframe"); iframe.loading="lazy"; iframe.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"; iframe.referrerPolicy="strict-origin-when-cross-origin"; iframe.src="https://www.youtube-nocookie.com/embed/"+s.yt; card.appendChild(iframe); }
    frag.appendChild(card);
  });
  wrap.appendChild(frag);
});

/* =========================
   Mapping videos
   ========================= */
function renderVideos(){
  var wrap = document.getElementById("videos");
  var frag = document.createDocumentFragment();

  mappingVideos.forEach(function(v, i){
    var card = document.createElement("article");
    card.className = "tile";

    var h = document.createElement("h3");
    h.textContent = v.title || ("Video " + (i+1));
    card.appendChild(h);

    var inputWrap = document.createElement("div");
    inputWrap.className = "row";
    var urlInput = document.createElement("input");
    urlInput.type = "url";
    urlInput.placeholder = "https://www.youtube.com/watch?v=...";
    urlInput.value = v.url || "";
    urlInput.style.cssText = "flex:1;min-width:160px;border:1px solid var(--line);border-radius:10px;padding:10px;background:transparent;color:var(--ink)";
    inputWrap.appendChild(urlInput);

    var saveBtn = document.createElement("button");
    saveBtn.textContent = "Save";
    inputWrap.appendChild(saveBtn);

    card.appendChild(inputWrap);

    var embedBox = document.createElement("div");
    if(v.url){
      var vid = extractYTVideoId(v.url);
      if(vid){
        var iframe = document.createElement("iframe");
        iframe.loading = "lazy";
        iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
        iframe.referrerPolicy = "strict-origin-when-cross-origin";
        iframe.src = "https://www.youtube-nocookie.com/embed/" + vid;
        embedBox.appendChild(iframe);
      }else{
        var p = document.createElement("p");
        p.className = "hint";
        p.textContent = "Enter a valid YouTube URL to preview here.";
        embedBox.appendChild(p);
      }
    }else{
      var p2 = document.createElement("p");
      p2.className = "hint";
      p2.textContent = "Paste a YouTube link and Save to store locally.";
      embedBox.appendChild(p2);
    }
    card.appendChild(embedBox);

    saveBtn.addEventListener("click", function(){
      mappingVideos[i].url = urlInput.value.trim();
      localStorage.setItem("plnt_tunes_videos", JSON.stringify(mappingVideos));
      renderVideos();
    });

    frag.appendChild(card);
  });

  wrap.innerHTML = "";
  wrap.appendChild(frag);
}

function extractYTVideoId(url){
  try{
    var u = new URL(url);
    if(u.hostname.includes("youtube.com")){
      return u.searchParams.get("v") || "";
    }
    if(u.hostname.includes("youtu.be")){
      return (u.pathname || "").replace("/","").trim();
    }
    return "";
  }catch(e){ return ""; }
}

/* =========================
   Boot
   ========================= */
(function boot(){
  try{
    var savedVideos = JSON.parse(localStorage.getItem("plnt_tunes_videos") || "null");
    if(Array.isArray(savedVideos) && savedVideos.length === mappingVideos.length){
      mappingVideos = savedVideos;
    }
  }catch(e){}
  renderPlaylists();
  renderVideos();
})();
</script>
</body>
</html>
